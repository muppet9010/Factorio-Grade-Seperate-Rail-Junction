--[[
    Train limit on the left station is set to 1. When both trains reach their respective left stations the upper train starts going towards
    the right station. When it reaches the signal before the tunnel portal the lower train is released to travel left as well, but should stay still
    with a message "Destination full". Only once the upper train has reached the left station and starts driving back to the right, the lower train
    should start moving as the left station is now free. Once the lower train returns to its left station the upper train starts again.

    Purpose of the test is to ensure that the reservation on the target station is held continuously without any gaps while the train is traveling
    through the tunnel, so that no other train can start moving towards the target station if it is full
]]
local Test = {}

local blueprintString =
    "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"

Test.Start = function(TestManager)
    TestManager.BuildBlueprintFromString(blueprintString, {x = 0, y = -90})
end

return Test
